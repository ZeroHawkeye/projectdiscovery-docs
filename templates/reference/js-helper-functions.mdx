---
title: "Javascript 辅助函数"
description: "可在全局 js 运行时和协议特定辅助程序中使用的 JS 辅助函数。"
icon: "function"
iconType: "solid"
---


## Javascript 运行时

| 名称 | 描述 | 签名 |
|------|-------------|------------|
| atob | 对给定字符串进行 Base64 解码 | `atob(string) string` |
| btoa | 对给定字符串进行 Base64 编码 | `bota(string) string` |
| to_json | 将给定对象转换为 JSON | `to_json(any) object` |
| dump_json | 在控制台中以 JSON 格式打印给定对象 | `dump_json(any)` |
| to_array | 设置/更新对象原型为数组以启用 Array.XXX 函数 | `to_array(any) array` |
| hex_to_ascii | 将给定的十六进制字符串转换为 ASCII | `hex_to_ascii(string) string` |
| Rand | Rand 返回长度为 n 的随机字节切片 | `Rand(n int) []byte` |
| RandInt | RandInt 返回一个随机整数 | `RandInt() int` |
| log | log 将给定输入打印到标准输出，带有 [JS] 前缀，用于调试目的 | `log(msg string)`, `log(msg map[string]interface{})` |
| getNetworkPort | getNetworkPort 注册 defaultPort，如果它与其他协议的端口冲突，则返回 defaultPort | `getNetworkPort(port string, defaultPort string) string` |
| isPortOpen | isPortOpen 检查主机上给定的 TCP 端口是否开放。timeout 是可选的，默认为 5 秒 | `isPortOpen(host string, port string, [timeout int]) bool` |
| isUDPPortOpen | isUDPPortOpen 检查主机上给定的 UDP 端口是否开放。timeout 是可选的，默认为 5 秒 | `isUDPPortOpen(host string, port string, [timeout int]) bool` |
| ToBytes | ToBytes 将给定输入转换为字节切片 | `ToBytes(...interface{}) []byte` |
| ToString | ToString 将给定输入转换为字符串 | `ToString(...interface{}) string` |
| Export | 将给定值转换为字符串并附加到脚本输出中 | `Export(value any)` |
| ExportAs | 使用指定键导出给定值，并使其在 DSL 和响应中可用 | `ExportAs(key string,value any)` |

## 模板流程

| 名称 | 描述 | 签名 |
|------|-------------|------------|
| log | 将给定对象/消息记录到标准输出（仅用于调试目的） | `log(obj any) any` |
| iterate | 规范化并迭代所有参数（可以是字符串、数组、null 等）并返回对象数组\n注意：如果对象类型未知（即可能是字符串或数组），应使用 iterate，它将始终返回字符串数组 | `iterate(...any) []any` |
| Dedupe | 对给定值进行去重并返回一个新的唯一值数组 | `new Dedupe()` |

## 代码协议

| 名称 | 描述 | 签名 |
|------|-------------|------------|
| OS | OS 返回当前操作系统 | `OS() string` |
| IsLinux | IsLinux 检查当前操作系统是否为 Linux | `IsLinux() bool` |
| IsWindows | IsWindows 检查当前操作系统是否为 Windows | `IsWindows() bool` |
| IsOSX | IsOSX 检查当前操作系统是否为 OSX | `IsOSX() bool` |
| IsAndroid | IsAndroid 检查当前操作系统是否为 Android | `IsAndroid() bool` |
| IsIOS | IsIOS 检查当前操作系统是否为 IOS | `IsIOS() bool` |
| IsJS | IsJS 检查当前操作系统是否为 JS | `IsJS() bool` |
| IsFreeBSD | IsFreeBSD 检查当前操作系统是否为 FreeBSD | `IsFreeBSD() bool` |
| IsOpenBSD | IsOpenBSD 检查当前操作系统是否为 OpenBSD | `IsOpenBSD() bool` |
| IsSolaris | IsSolaris 检查当前操作系统是否为 Solaris | `IsSolaris() bool` |
| Arch | Arch 返回当前架构 | `Arch() string` |
| Is386 | Is386 检查当前架构是否为 386 | `Is386() bool` |
| IsAmd64 | IsAmd64 检查当前架构是否为 Amd64 | `IsAmd64() bool` |
| IsARM | IsArm 检查当前架构是否为 Arm | `IsARM() bool` |
| IsARM64 | IsArm64 检查当前架构是否为 Arm64 | `IsARM64() bool` |
| IsWasm | IsWasm 检查当前架构是否为 Wasm | `IsWasm() bool` |

## JavaScript 协议

| 名称 | 描述 | 签名 |
|------|-------------|------------|
| set | 从初始化代码设置变量。此函数仅在初始化代码块中可用 | `set(string, interface{})` |
| updatePayload | 从初始化代码更新/覆盖任何有效载荷。此函数仅在初始化代码块中可用 | `updatePayload(string, interface{})` |
